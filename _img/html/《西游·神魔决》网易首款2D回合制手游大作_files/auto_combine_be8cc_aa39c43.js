var MobileTopic=function(){function t(){setTimeout(function(){if(g.isHorizontal){$containerDiv.css("width",$(window).width()*f),$stages.css({width:$(window).width()});var t=0-$containerDiv[0].offsetWidth/f*d;$containerDiv.css({"-webkit-transform":"translate("+t+"px,0)"})}else{$containerDiv.css("height",window.innerHeight*f),$("#content").css({height:window.innerHeight}),$stages.css({height:window.innerHeight});var i=0-$containerDiv[0].offsetHeight/f*d;$containerDiv.css({"-webkit-transform":"translate(0,"+i+"px)"})}},100)}function i(i){90==window.orientation||-90==window.orientation?($("#forhorview").css("display","-webkit-box"),$("#content").css({height:$(window).height(),width:2*$(window).height()/3,margin:"auto"}),$stages.css({height:"480px"})):($("#content").css({width:"auto",margin:"auto",height:"100%"}),$stages.css({height:$("#content")[0].offsetHeight}),$("#forhorview").css("display","none")),t(i)}function e(){r[0].addEventListener("touchstart",k,!1),r[0].addEventListener("touchmove",k,!1),r[0].addEventListener("touchend",k,!1),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",function(t){i(t)},!1),window.addEventListener("resize",function(i){t(i)},!1)}function n(t){function i(i){var n=new Image;n.onload=function(){e++,1==e&&t()},n.src=i}var e=0;p.length>0?$(p).each(function(t,e){i(e)}):t()}function s(t){g=$.extend({warper:"",containerDiv:"",stages:"",duration:800,stageBgs:[],isHorizontal:!1,isAutoToNextStage:!0,swipeCallback:function(){},initedCallback:function(){}},t||{}),r=$(g.warper),$containerDiv=$(g.containerDiv),$stages=$containerDiv.find(g.stages),_duration=g.duration,f=$stages.length,$containerDiv.css(l+"transition",l+"transform "+g.duration+"ms ease-in-out"),g.isHorizontal?($containerDiv.css("width",$("#content")[0].offsetWidth*f),$stages.css({width:$("#content")[0].offsetWidth,"float":"left"})):$containerDiv.css("height",window.innerHeight*f),$stages.css("height",window.innerHeight),$stages.each(function(t){u[t]=[]}),g.stageBgs.length>0&&$(g.stageBgs).each(function(t,i){p.push(i)})}function a(){(90==window.orientation||-90==window.orientation)&&$("#forhorview").css("display","-webkit-box");var t=g.stageBgs;n(function(){$stages.each(function(i,e){t.length>i&&""!=t[i]&&$(e).css({"background-image":"url("+t[i]+")"})}),$("#loading").hide(),v(0)}),e(),"function"==typeof g.initedCallback&&g.initedCallback()}var o,r,c=navigator.userAgent.toLowerCase(),l="",h=!1,f=0,d=0,u={},p=[],g=null;switch(c.match(/msie([\d.]+)/)&&(o="ie"),c.match(/firefox([\d.]+)/)&&(o="firefox"),c.match(/chrome([\d.]+)/)&&(o="chrome"),c.match(/opera([\d.]+)/)&&(o="opera"),c.match(/version\/([\d.]+).*safari/)&&(o="safari"),o){case"ie":l="-ms-";break;case"firefox":l="-moz-";break;case"chrome":l="-webkit-";break;case"opera":l="-o-";break;case"safari":l="-webkit-";break;default:l=""}var w=function(t){this.options=$.extend({stageIndex:null,ele:null,imgUrl:"",forwardInClass:"",backInClass:"",outClass:"",finishCallback:null},t||{}),this.init(),this.options.imgUrl&&""!=this.options.imgUrl&&p.push(this.options.imgUrl),"undefined"==typeof u[this.options.stageIndex]&&(u[this.options.stageIndex]=[]),u[this.options.stageIndex].push(this)};w.prototype={init:function(){var t={};this.options.imgUrl&&""!=this.options.imgUrl&&(t["background-image"]="url("+this.options.imgUrl+")"),$(this.options.ele).css(t)},reset:function(){if($(this.options.ele).hasClass(this.options.forwardInClass)&&$(this.options.ele).removeClass(this.options.forwardInClass),$(this.options.ele).hasClass(this.options.backInClass)&&$(this.options.ele).removeClass(this.options.backInClass),""!=this.options.outClass){$(this.options.ele).addClass(this.options.outClass);{var t=this;setTimeout(function(){$(t.options.ele).removeClass(t.options.outClass)},_duration)}}},play:function(t){if($(this.options.ele).hasClass(this.options.outClass)&&$(this.options.ele).removeClass(this.options.outClass),t){var i="";i=""!=this.options.backInClass?this.options.backInClass:this.options.forwardInClass,$(this.options.ele).addClass(i)}else $(this.options.ele).addClass(this.options.forwardInClass);"function"==typeof this.options.finishCallback&&this.options.finishCallback()},addEvent:function(){}};var v=function(t){if(!h){var i=($containerDiv.css("-webkit-transform").replace("translate(","").replace(")","").replace(/px/g,"").split(","),!1);d>t&&(i=!0);var e=0;g.isHorizontal?(e=-$containerDiv[0].offsetWidth/f*t,$containerDiv.css({"-webkit-transform":"translate("+e+"px,0)"})):(e=-$containerDiv[0].offsetHeight/f*t,$containerDiv.css({"-webkit-transform":"translate(0,"+e+"px)"})),h=!0,g.isReplay&&$(u[d]).each(function(t,i){i.init()}),$(u[t]).each(function(t,e){e.play(i)}),d=t,$stages.eq(d).hasClass("inited")||$stages.eq(d).addClass("inited");{setTimeout(function(){h=!1},_duration)}"function"==typeof g.swipeCallback&&g.swipeCallback({curStageIndex:t,swipeTo:i?-1:1})}},b=function(){if(!g.isAutoToNextStage)return void g.swipeCallback({curStageIndex:d,swipeTo:-1});if(!h){{$containerDiv.css("-webkit-transform").replace("translate(","").replace(")","").replace(/px/g,"").split(",")}if(0==d)return!1;d--;var t=0;g.isHorizontal?(t=-$containerDiv[0].offsetWidth/f*d,$containerDiv.css({"-webkit-transform":"translate("+t+"px,0)"})):(t=-$containerDiv[0].offsetHeight/f*d,$containerDiv.css({"-webkit-transform":"translate(0,"+t+"px)"})),h=!0,g.isReplay&&($(u[d+1]).each(function(t,i){i.reset()}),$(u[d]).each(function(t,i){i.play(!0)}));{setTimeout(function(){h=!1},_duration)}"function"==typeof g.swipeCallback&&g.swipeCallback({preStageIndex:d+1,curStageIndex:d})}},m=function(){if(!g.isAutoToNextStage)return void g.swipeCallback({curStageIndex:d,swipeTo:1});if(!h){{$containerDiv.css("-webkit-transform").replace("translate(","").replace(")","").replace(/px/g,"").split(",")}if(d==f-1)return!1;d++,$stages.eq(d).hasClass("inited")||$stages.eq(d).addClass("inited");var t=0;g.isHorizontal?(t=-$containerDiv[0].offsetWidth/f*d,$containerDiv.css({"-webkit-transform":"translate("+t+"px,0)"})):(t=-$containerDiv[0].offsetHeight/f*d,$containerDiv.css({"-webkit-transform":"translate(0,"+t+"px)"})),h=!0,void 0!=typeof u[d]&&u[d].length>0&&(g.isReplay&&$(u[d-1]).each(function(t,i){i.reset()}),$(u[d]).each(function(t,i){i.play()}));{setTimeout(function(){h=!1},_duration)}"function"==typeof g.swipeCallback&&g.swipeCallback({preStageIndex:d-1,curStageIndex:d})}},k={arrow_left:-80,arrow_right:-80,click_target:"",isScrolling:!1,handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":this.end(t)}},start:function(t){var i=t.touches[0];startP={x:i.pageX,y:i.pageY,time:+new Date},delta={x:0,y:0},this.click_target=""},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){t.preventDefault();var i=t.touches[0];delta={x:i.pageX-startP.x,y:i.pageY-startP.y}}},end:function(){var t=Math.abs(delta.x)>50||Math.abs(delta.x)>$containerDiv.width()/2,i=Math.abs(delta.y)>50||Math.abs(delta.y)>$containerDiv.height()/2;if(t&&i&&(Math.abs(delta.x)>Math.abs(delta.y)?i=!1:t=!1),t&&(delta.x<0?g.isHorizontal&&m():g.isHorizontal&&b()),i)if(delta.y<0){if(g.isHorizontal)return;m()}else{if(g.isHorizontal)return;b()}}};return{createTopic:function(t){s(t)},createAnimateEle:function(t){return new w(t)},init:function(){a()},scorllTo:function(t){v(t)},getAinmateEles:function(){return u},resize:function(i){t(i)}}}();
;var shareInfo={title:document.getElementById("pub-share-title").innerHTML,desc:document.getElementById("pub-share-desc").innerHTML,url:window.location.href,imgurl:document.getElementById("pub-share-img").src},IndexFun={isWx:/micromessenger/i.test(navigator.userAgent.toLowerCase()),init:function(){var e=this;e.setYxShare(),e.videoInit(),$("#phone").blur(function(e){MobileTopic.resize(e)})},showForm:function(e){MobileTopic.resize(e);$(".stage_btnA").css("opacity","0"),$("#Jform").css("bottom","0")},hideForm:function(e){MobileTopic.resize(e);$(".stage_btnA").css("opacity","1"),$("#phone").val(""),$("#Jform").css("bottom","-135px")},is_phone:function(e){return e.match(/^(13|14|15|18|17)\d{9}$/)},postPhone:function(){var e=this,t=$("#phone").val();return e.is_phone(t)?void $("#iframeloca").attr("src","http://cgi.mmog.163.com:8088/v4a/show_vote/1104/?pnum="+t):void e.showTips("请填写正确的手机号码")},closeBm:function(e){var t=this,e=decodeURIComponent(e);"投票成功，谢谢!"==e?(t.showTips("恭喜您提交成功！"),t.hideForm()):t.showTips(e)},showTips:function(e){var t=document.getElementById("Jtips");t||(t=document.createElement("div"),t.id="Jtips",t.className="m-tips",t.style.cssText="background:rgba(0,0,0,0.8); color: #fff;position: absolute; left: 50%; top: 50%; font-size: 14px;width:250px; padding: 20px 20px; line-height: 18px; margin-top: -40px;opacity: 0; display: none;z-index: 9999;text-align:center;border-radius:10px;",document.body.appendChild(t)),t.innerHTML=e,t.style.display="block",arguments[1]&&(t.style.width=arguments[1]);var i=t.clientWidth/2;t.style.marginLeft="-"+i+"px",t.style.opacity=1,setTimeout(function(){t.style.webkitTransition="all 0.3s ease-in",t.style.opacity=0,t.style.marginTop="-80px",setTimeout(function(){t.style.display="none",t.style.marginTop="-40px"},300)},2e3)},videoInit:function(){var e="ontouchstart"in window,t=e?"touchend":"mouseup";$("#video .bg").live(t,function(){setTimeout(function(){$("#video").hide(),$("#video").html("")},400)})},showVideo:function(e){var t=e.getAttribute("data-mp4");$("#video").html('<div class="bg"></div><video src="'+t+'" controls="controls" id="tsvideo"></video>').show();var i=$("#tsvideo").get(0);setTimeout(function(){i.play()},16)},setYxShare:function(){for(var e=document.getElementsByTagName("meta"),t=0;t<e.length;t++)"yixin-share-desc"==e[t].getAttribute("name")&&e[t].setAttribute("content",shareInfo.desc),"yixin-share-image"==e[t].getAttribute("name")&&e[t].setAttribute("content",shareInfo.imgurl)}},_animates,_bgurl1="http://res.sm.netease.com/gw/14v2/m/img/bg01_f6ec114.jpg",_bgurl3="http://res.sm.netease.com/gw/14v2/m/img/bg03_f6ec114.jpg",_bgurl4="http://res.sm.netease.com/gw/14v2/m/img/bg04_658c6ed.jpg",_bgurl5="http://res.sm.netease.com/gw/14v2/m/img/bg05_2a89bd3.jpg",_bgurl6="http://res.sm.netease.com/gw/14v2/m/img/bg06_62a5b7a.jpg";MobileTopic.createTopic({warper:"#specile",containerDiv:"#stage",stages:".stage",duration:800,activeClassName:"inited",isReplay:!1,isHorizontal:!1,stageBgs:[_bgurl1,_bgurl3,_bgurl4,_bgurl5,_bgurl6],isAutoToNextStage:!0,swipeCallback:function(e){IndexFun.hideForm();var t=this,i=$(t.stages);if(!(e.curStageIndex<e.preStageIndex||e.curStageIndex+1==i.length))for(var n=i[e.curStageIndex+1],o=n.getElementsByTagName("img"),s=o.length,a=0;s>a;a++)o[a].attributes["data-src"]&&(o[a].src=o[a].attributes["data-src"].value)},initedCallback:function(){_animates=MobileTopic.getAinmateEles(),IndexFun.init(),$("#content").css({height:window.innerHeight})}}),MobileTopic.init();var onBridgeReady=function(){WeixinJSBridge.on("menu:share:appmessage",function(){var e=shareInfo.imgurl,t=shareInfo.url,i=shareInfo.title,n=shareInfo.desc;WeixinJSBridge.invoke("sendAppMessage",{img_url:e,img_width:"640",img_height:"640",link:t,desc:n,title:i},function(){});try{nie.config.stats.url.add(t+"?action=hy","分享到好友")}catch(o){}}),WeixinJSBridge.on("menu:share:timeline",function(){var e=shareInfo.imgurl,t=shareInfo.url,i=(shareInfo.title,shareInfo.desc);WeixinJSBridge.invoke("shareTimeline",{img_url:e,img_width:"640",img_height:"640",link:t,desc:i,title:i},function(){});try{nie.config.stats.url.add(t+"?action=py","分享到朋友圈")}catch(n){}})};document.addEventListener?document.addEventListener("WeixinJSBridgeReady",onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",onBridgeReady));